@model ProductDetailsModel
@{
    ViewData["Title"] = "ProductDetailsForUser";
    Layout = "~/Views/Shared/UserLayout.cshtml";
}




<style>
    body {
        font-family: Arial, Helvetica, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f2f2f2;
        color: black
    }

    .urun-detail {
        background-color: #ffffff;
        padding: 20px;
        border: 1px solid #cccccc;
        border-radius: 5px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
        max-width: 600px;
        margin: 20px auto;
        text-align: center;
    }

        .urun-detail img {
            max-width: 100%;
            height: auto;
            margin-bottom: 20px;
            border-radius: 5px;
            border: 1px solid #ddd;
        }

        .urun-detail h1 {
            font-size: 24px;
            color: #333333;
            margin-bottom: 10px;
        }

        .urun-detail p {
            margin: 5px 0;
        }

        .urun-detail .button-container {
            margin-top: 20px;
        }

        .urun-detail .btn {
            padding: 10px 20px;
            background-color: darkorange;
            color: #ffffff;
            text-decoration: none;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }

            .urun-detail .btn:hover {
                background-color: orangered;
            }
</style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
    $(document).ready(function () {

        $("#buy-product").click(function (e) {
            e.preventDefault();
            var url = $(this).attr("href");
            Swal.fire({
                icon: "warning",
                title: "Ürünü sepete eklemek istedğinizden emin misiniz?",
                text: "Ürün Sepete eklenecek",
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Evet',
                cancelButtonText: "Vazgeç"
            }).then((result) => {
                if (result.isConfirmed) {
                    $.ajax({
                        type: "POST",
                        url: url,
                        success: function (response) {
                            if (response.success) {
                                Swal.fire(
                                    'Eklendi',
                                    'Ürün Başarıyla Sepete Eklendi',
                                    'success'
                                ).then(function () {
                                    location.reload();
                                });
                            }
                            else {
                                Swal.fire(
                                    'Hata',
                                    response.message || "Ürün sepete eklenirken bir hata oluştu",
                                    'error'
                                );
                            }
                        },
                        error: function () {
                            Swal.fire(
                                "Hata",
                                "Ürün Sepete Eklenemedi",
                                "error"
                            );
                        }
                    });
                }
            });
        });
    });


</script>

<div class="urun-detail">
    <img src="@Url.Content("~/images/" + Model.ProductImage)" alt="@Model.ProductName" />

    <h1>@Model.ProductName</h1>
    <p><strong>Kategori:</strong> @Model.CategoryName</p>
    <p><strong>Açıklama:</strong> @Model.Description</p>
    <p><strong>Firma:</strong> @Model.CategoryName</p>
    <p><strong>Fiyat:</strong> @Model.Price</p>
    <p><strong>Stok:</strong> @Model.Stock</p>
    <p><strong>Eklenme Tarihi:</strong> @Model.AddingDate</p>
    <p><strong>Stok:</strong>@Model.Stock</p>
    @if (Model.Stock <= 0)
    {

        <p>Ürün Stokta Yok</p>
    }
    else
    {
        <div class="button-container">
            <a href="@Url.Action("AddProductUserCard","Cart",new {productId=Model.ProductId})" id="buy-product" class="btn">Satın Al</a>
            <a href="@Url.Action("ReportProduct","Product",new {productId=Model.ProductId})"  class="btn">Şikayet Et</a>

        </div>
    }
</div>


@await Component.InvokeAsync("CommentsForUser", new { productId = Model.ProductId })
